<header
  id="header"
  class="fixed top-0 left-0 w-full z-50 transition-all duration-300 font-quicksand invisible"
>
  <div
    class="sm:container mx-auto flex items-center justify-between
           px-4 sm:px-6 py-3 md:py-4
           bg-white sm:rounded-full sm:mt-3
           border border-gray-200"
  >

    <!-- Logo -->
    <div class="flex items-center">
      <img
        src="/icons/LOGO-09.png"
        alt="Bullette Logo"
        class="w-36 lg:w-52 object-contain pointer-events-none"
        loading="eager"
      />
    </div>

    <!-- Desktop Nav -->
    <nav
      class="hidden xl:flex items-center gap-10
             text-gray-800 font-medium tracking-wide"
    >
      <a href="/" class="hover:text-red-600 transition">HOME</a>

      <!-- PRODUCTS MEGA MENU -->
      <div class="relative group">
        <a href="/products/lighting"
           class="hover:text-red-600 transition flex items-center gap-1">
          PRODUCTS
          <svg class="w-4 h-4 transition-transform group-hover:rotate-180"
               fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
          </svg>
        </a>

        <div
          class="absolute left-1/2 top-full mt-5 w-[760px]
                 -translate-x-1/2
                 opacity-0 invisible
                 group-hover:opacity-100 group-hover:visible
                 transition-all duration-300 z-50"
        >
          <div class="bg-white rounded-2xl border border-gray-100 shadow-xl p-6">
            <div class="grid grid-cols-3 gap-4">

              <a href="/products/lighting" class="product-card">
                <img src="/icons/products/lighting.png" class="icon" />
                <span>Lighting</span>
              </a>

              <a href="/products/switch-socket" class="product-card">
                <img src="/icons/products/switch.png" class="icon" />
                <span>Switch & Socket</span>
              </a>

              <a href="/products/wiring-accessories" class="product-card">
                <img src="/icons/products/wiring.png" class="icon" />
                <span>Wiring Accessories</span>
              </a>

              <a href="/products/gi-conduit" class="product-card">
                <img src="/icons/products/conduit.png" class="icon" />
                <span>GI Conduit & Accessories</span>
              </a>

              <a href="/products/connectors" class="product-card">
                <img src="/icons/products/connectors.png" class="icon" />
                <span>Connectors</span>
              </a>

              <a href="/products/cable-management" class="product-card">
                <img src="/icons/products/cable.png" class="icon" />
                <span>Cable Management</span>
              </a>

              <a href="/products/tools" class="product-card">
                <img src="/icons/products/tools.png" class="icon" />
                <span>Tools</span>
              </a>

            </div>
          </div>
        </div>
      </div>

      <a href="/About" class="hover:text-red-600 transition">ABOUT US</a>
      <a href="/blog" class="hover:text-red-600 transition">BLOG</a>
    </nav>

    <!-- CTA + Menu -->
    <div class="flex items-center gap-2">
      <button id="theme-toggle"
              class="bg-black hidden transition lg:inline-flex items-center rounded-full w-fit h-15">
        <img src="/icons/ULTRA-23.png" alt="Ultra" class="w-38" />
      </button>

      <a href="/brochure.pdf" download
         class="group hidden lg:flex items-center gap-3
                px-4 py-3 lg:px-7 lg:py-4
                rounded-full bg-red-500
                transition hover:shadow-md hover:scale-[1.02]">
        <svg xmlns="http://www.w3.org/2000/svg"
             class="w-6 h-6 text-yellow-300"
             fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 16l4-5h-3V4h-2v7H8l4 5zm8 2v2H4v-2h16z"/>
        </svg>
        <span class="text-yellow-300 uppercase font-medium">
          Download Brochure
        </span>
      </a>

      <button id="menuIcon"
              class="xl:hidden rounded-full p-2 bg-gray-100">
        <img src="/icons/hamburger.svg" class="w-8 h-8" />
      </button>
    </div>
  </div>
</header>

<!-- SIDEBAR -->
<aside
  id="sidebar"
  class="fixed top-0 right-0 z-[9999] w-3/5 max-w-sm h-screen
         bg-white border-l border-gray-100 shadow-2xl
         translate-x-full transition-transform duration-500"
>
  <button id="closesidebar"
          class="absolute top-5 right-5 p-2 rounded-full bg-gray-100">
    <img src="/icons/X.svg" class="w-7 h-7" />
  </button>

  <div class="flex flex-col justify-evenly h-full px-8 py-20">
    <nav class="flex flex-col space-y-8 text-2xl font-medium">

      <a href="/" class="hover:text-red-600">Home</a>

      <!-- MOBILE PRODUCTS -->
      <div class="space-y-3">
        <button id="mobileProductsBtn"
                class="flex items-center justify-between w-full">
          Products
          <svg id="mobileProductsIcon"
               class="w-6 h-6 transition-transform"
               fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
          </svg>
        </button>

        <div id="mobileProductsMenu" class="hidden pl-4 space-y-4 text-lg">
          <a href="/products/lighting">Lighting</a>
          <a href="/products/switch-socket">Switch & Socket</a>
          <a href="/products/wiring-accessories">Wiring Accessories</a>
          <a href="/products/gi-conduit">GI Conduit & Accessories</a>
          <a href="/products/connectors">Connectors</a>
          <a href="/products/cable-management">Cable Management</a>
          <a href="/products/tools">Tools</a>
        </div>
      </div>

      <a href="/About" class="hover:text-red-600">About</a>

      <a href="/UltraDark"
         class="bg-black inline-flex items-center rounded-2xl h-14 px-4">
        <img src="/icons/ULTRA-23.png" class="w-38" />
      </a>
    </nav>
  </div>
</aside>

<style>
.product-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  border-radius: 0.75rem;
  border: 1px solid #f1f1f1;
  transition: all .25s ease;
}
.product-card:hover {
  border-color: #ef4444;
  background: #fff5f5;
}
.product-card span {
  font-size: 0.875rem;
  font-weight: 500;
}
.product-card:hover span {
  color: #ef4444;
}
.product-card .icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
}
</style>

<script>
import { gsap } from "gsap";

const header = document.getElementById("header");
let lastScroll = 0;
let isHidden = false;

gsap.set(header, { y: -120 });

window.addEventListener("load", () => {
  gsap.to(header, { y: 0, autoAlpha: 1, duration: .8 });
});

window.addEventListener("scroll", () => {
  const s = window.scrollY;
  if (s < 100) return gsap.to(header, { y: 0, autoAlpha: 1 });
  if (s > lastScroll && !isHidden) {
    gsap.to(header, { y: "-110%", autoAlpha: 0 });
    isHidden = true;
  } else if (s < lastScroll && isHidden) {
    gsap.to(header, { y: 0, autoAlpha: 1 });
    isHidden = false;
  }
  lastScroll = s;
});

const menuIcon = document.getElementById("menuIcon");
const sidebar = document.getElementById("sidebar");
const closeBtn = document.getElementById("closesidebar");

menuIcon.onclick = () => {
  sidebar.classList.replace("translate-x-full","translate-x-0");
  document.body.style.overflow = "hidden";
};

closeBtn.onclick = () => {
  sidebar.classList.replace("translate-x-0","translate-x-full");
  document.body.style.overflow = "";
};

const btn = document.getElementById("mobileProductsBtn");
const menu = document.getElementById("mobileProductsMenu");
const icon = document.getElementById("mobileProductsIcon");

btn.onclick = () => {
  menu.classList.toggle("hidden");
  icon.classList.toggle("rotate-180");
};
</script>
