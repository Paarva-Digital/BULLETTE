---
const { product } = Astro.props;
---

<a
  href={`/products/${product.category}/${product.slug}`}
class="
  product-card group relative block h-full
  rounded-2xl sm:rounded-3xl
  overflow-hidden
  bg-white
  border border-gray-200
  transition-colors duration-300
  hover:border-gray-300
"
  data-tag={Array.isArray(product.tag) ? product.tag.join(",") : product.tag ?? ""}
>
  <!-- subtle surface activation -->
  <div
    class="
      pointer-events-none absolute inset-0
      transition-opacity duration-300
      bg-gradient-to-br
      from-red-500
      via-transparent
      to-transparent
    "
  ></div>

  <!-- Badge -->
  {product.badge && (
    <span
      class="absolute top-4 left-4 z-20
             rounded-full
             bg-black/80 backdrop-blur
             px-3 py-1
             text-[10px] font-semibold tracking-wide text-white"
    >
      {product.badge}
    </span>
  )}

  <!-- Image -->
  <div class="relative p-2 md:p-5">
    <div
      class="relative aspect-square w-full
             rounded-2xl
             bg-gradient-to-br from-gray-50 to-gray-200
             overflow-hidden"
    >
      <img
        src={product.image ?? "/images/placeholder.png"}
        alt={product.alt ?? product.name}
        loading="lazy"
        data-pagefind-meta="image[src],image_alt[alt]"
        class="
          h-full w-full object-contain
          transition-all duration-500 contrast-110
saturate-105
        "
      />

      <!-- Desktop hover CTA -->
      <div
        class="
          pointer-events-none absolute inset-0 hidden sm:flex
          items-end justify-end p-2 md:p-4
          opacity-0 group-hover:opacity-100
          transition-opacity duration-300
        "
      >
        <span
          data-pagefind-ignore
          class="
            inline-flex items-center gap-3
            rounded-full
            px-5 py-2
            text-sm font-medium
            text-gray-900
            bg-white/90 backdrop-blur
            border border-black/10
            shadow-[0_6px_20px_rgba(0,0,0,0.08)]
          "
        >
          View product

          <!-- NEW RIGHT ICON (kept black & clean) -->
          <svg
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-black"
            viewBox="0 0 128 128"
          >
            <path d="M109.2 18.7c-24.9-25-65.4-25-90.3 0-24.9 25-24.9 65.5 0 90.5s65.4 25 90.3 0c25-24.9 25-65.5 0-90.5zm-3.7 86.8c-22.9 22.9-59.9 22.9-82.8 0s-22.9-60.1 0-83 59.9-22.9 82.8 0c22.8 22.9 22.8 60.1 0 83zm-60.4-66v5.4h34.2L34 90.4l3.8 3.8 45.4-45.5V83h5.4V39.5H45.1z"/>
          </svg>
        </span>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="px-5 pb-6 space-y-2 text-left">
    <h3
      class="
        text-sm sm:text-lg xl:text-xl
        font-medium tracking-tight
        text-gray-900
        transition-colors duration-300
        group-hover:text-gray-950
      "
    >
      {product.name}
    </h3>

    {(product.wattage || product.ip || product.type) && (
      <p class="text-xs text-gray-500 leading-relaxed">
        {product.wattage && <span>{product.wattage}</span>}
        {product.wattage && product.ip && <span> • </span>}
        {product.ip && <span>{product.ip}</span>}
        {(product.wattage || product.ip) && product.type && <span> • </span>}
        {product.type && <span>{product.type}</span>}
      </p>
    )}

    <!-- Mobile affordance -->
<span
  data-pagefind-ignore
  class="
    inline-flex items-center gap-2
    rounded-full
    px-4 py-1.5
    text-xs font-semibold
    text-white
    bg-red-600
    sm:hidden
  "
>
  View details

  <!-- Your right arrow SVG (white, clean) -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 128 128"
    class="w-4 h-4 fill-white"
  >
    <path d="M109.2 18.7c-24.9-25-65.4-25-90.3 0-24.9 25-24.9 65.5 0 90.5s65.4 25 90.3 0c25-24.9 25-65.5 0-90.5zm-3.7 86.8c-22.9 22.9-59.9 22.9-82.8 0s-22.9-60.1 0-83 59.9-22.9 82.8 0c22.8 22.9 22.8 60.1 0 83zm-60.4-66v5.4h34.2L34 90.4l3.8 3.8 45.4-45.5V83h5.4V39.5H45.1z"/>
  </svg>
</span>


  </div>
</a>
