---
import Navbar from "@/components/Global/Navbar.astro";
import Footer from "@/components/Global/Footer.astro";
import Layout from "@/layouts/Layout.astro";
import { sanity } from "@/sanity/lib/sanity";

export const prerender = false;

const posts = await sanity.fetch(`
  *[_type == "blogPost" && defined(slug.current)]
  | order(publishedAt desc)[0...3]{
    title,
    "slug": slug.current,
    excerpt,
    author,
    publishedAt,
    coverImage{
      asset->{url}
    }
  }
`);
---

<Layout>
  <Navbar />

  <!-- Exclude blog listing content from Pagefind index -->
  <!-- ================= BLOG INTRO ================= -->
  <section data-pagefind-ignore class="bg-white pt-28 pb-16 sm:pt-32 sm:pb-20">
    <div class="container mx-auto px-6">

      <div class="max-w-2xl">
        <h1 class="text-3xl sm:text-4xl font-medium text-gray-900">
          EXPERIENCE
        </h1>
        <p class="mt-3 text-lg text-gray-600">
          Electrical lifestyle insights, safety guidance and expert perspectives
          from the Bullette team.
        </p>
      </div>

      <!-- Subtle divider -->
      <div class="mt-12 h-px bg-gray-200"></div>

      <!-- ================= BLOG CARDS ================= -->
      <div class="mt-14 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.map((post) => (
          <a
            href={`/blog/${post.slug}`}
            class="group rounded-3xl overflow-hidden bg-white
                   border border-gray-100
                   shadow-lg shadow-gray-100 hover:shadow-xl
                   transition-all duration-300
                   flex flex-col"
          >
            <!-- Image -->
            <div class="relative h-56 overflow-hidden">
              <img
                src={post.coverImage?.asset?.url ?? "/images/placeholder.png"}
                alt={post.title}
                class="absolute inset-0 w-full h-full object-cover
                       transition-transform duration-700
                       group-hover:scale-110"
              />
            </div>

            <!-- Content -->
            <div class="p-6 flex flex-col gap-4 flex-1">
              <div class="flex items-center gap-3 text-sm text-gray-500">
                <span>
                  {new Date(post.publishedAt).toLocaleDateString()}
                </span>
                <span class="w-1 h-1 bg-gray-400 rounded-full" />
                <span>{post.author}</span>
              </div>

              <h3 class="text-lg font-semibold text-gray-900 leading-snug">
                {post.title}
              </h3>

              {post.excerpt && (
                <p class="text-sm text-gray-600 leading-relaxed">
                  {post.excerpt}
                </p>
              )}

              <div class="mt-auto">
  <span
    class="inline-flex items-center gap-2
           text-sm font-medium text-red-600
           group-hover:gap-3
           transition-all duration-300"
  >
    Read Article

    <!-- Right Arrow SVG -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-4 h-4
             transition-transform duration-300
             group-hover:translate-x-1"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M5 12h14M13 5l7 7-7 7"
      />
    </svg>
  </span>
</div>

            </div>
          </a>
        ))}
      </div>
    </div>
  </section>


<section data-pagefind-ignore class="bg-gray-50 py-24 hidden">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-10">

      <!-- CARD -->
      <div class="rounded-3xl bg-white p-8
                  border border-gray-200
                  hover:shadow-xl shadow-gray-200
                  transition">
        <h3 class="text-xl font-semibold text-gray-900 mb-4">
          #Product Safety
        </h3>
        <p class="text-gray-600 leading-relaxed">
          Best practices, compliance insights and safety-first approaches
          to ensure long-term electrical reliability.
        </p>
      </div>

      <div class="rounded-3xl bg-white p-8
                  border border-gray-200
                  hover:shadow-xl shadow-gray-200
                  transition">
        <h3 class="text-xl font-semibold text-gray-900 mb-4">
          #Smart Living
        </h3>
        <p class="text-gray-600 leading-relaxed">
          How smart wiring, automation and energy-efficient solutions
          shape modern homes and workspaces.
        </p>
      </div>

      <div class="rounded-3xl bg-white p-8
                  border border-gray-200
                  hover:shadow-xl shadow-gray-200
                  transition">
        <h3 class="text-xl font-semibold text-gray-900 mb-4">
          #Support & Guidance
        </h3>
        <p class="text-gray-600 leading-relaxed">
          Installation tips, maintenance advice and expert answers
          from the Bullette support team.
        </p>
      </div>

    </div>
  </div>
</section>

<section data-pagefind-ignore class="bg-white py-28">
  <div class="container mx-auto px-6">

    <div class="relative">

      <!-- TOP LEFT PILLS -->
      <div
        class="absolute -top-5 right-10
               flex gap-3
               z-20"
      >
        <span
          class="px-4 py-2
                 h-10
                 flex items-center
                 rounded-full
                 bg-white
                 text-sm font-medium text-red-600
                 border border-gray-200
                 shadow-md"
        >
          #Product Safety
        </span>

        <span
          class="px-4 py-2
                 h-10
                 flex items-center
                 rounded-full
                 bg-white
                 text-sm font-medium text-red-600
                 border border-gray-200
                 shadow-md"
        >
          #Smart Living
        </span>
                <span
          class="px-4 py-2
                 h-10
                 flex items-center
                 rounded-full
                 bg-white
                 text-sm font-medium text-red-600
                 border border-gray-200
                 shadow-md"
        >
          #Support & Guidance
        </span>

        <span
          class="px-4 py-2
                 h-10
                 flex items-center
                 rounded-full
                 bg-white
                 text-sm font-medium text-red-600
                 border border-gray-200
                 shadow-md"
        >
          #Expert Advice
        </span>
      </div>


      <!-- CTA BLOCK -->
      <div
        class="relative overflow-hidden
               rounded-4xl
               bg-[url('/bg/555.jpg')] bg-cover bg-center
               px-10 sm:px-14 py-18
               text-center text-white
               z-10"
      >
        <h3 class="text-2xl sm:text-3xl font-semibold">
          Looking for Expert Guidance?
        </h3>

        <p class="mt-6 text-gray-300 max-w-xl mx-auto leading-relaxed">
          Connect with our team for reliable advice, support and product
          recommendations.
        </p>

        <div class="mt-10">
          <a
            href="/contact"
            class="group inline-flex items-center
                   h-14
                   pl-8 pr-2
                   rounded-full
                   bg-white text-red-600
                   text-base font-medium
                   transition-colors
                   hover:bg-black hover:text-white"
          >
            <span class="mr-5">Connect Us</span>

            <span
              class="flex items-center justify-center
                     w-11 h-11
                     rounded-full
                     bg-red-600"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 text-white"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M5 12h14M13 5l7 7-7 7"
                />
              </svg>
            </span>
          </a>
        </div>
      </div>

    </div>
  </div>
</section>






  <Footer />
</Layout>
